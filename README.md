# Sowrakasha AI Platform ğŸ§ 

![Status](https://img.shields.io/badge/Status-Online-success)
![Kubernetes](https://img.shields.io/badge/Orchestrator-GKE-blue)
![Model](https://img.shields.io/badge/Model-Llama3-orange)
![Frontend](https://img.shields.io/badge/Frontend-Next.js-black)

**Sowrakasha** (Kannada for "Protection/Safety") is a self-hosted, self-improving AI platform running on Google Kubernetes Engine (GKE). It is designed to run completely within a private cloud environment, ensuring data sovereignty and cost-efficiency by leveraging CPU inference.

ğŸ”— **Live Link**: [http://sowrakasha.me](http://sowrakasha.me)

---

## ğŸ—ï¸ Architecture

The platform follows a **Cloud-Native GitOps** architecture:

```mermaid
graph TD
    User[ğŸ‘¤ User] -->|https://sowrakasha.me| GCLB[ğŸ›¡ï¸ Google Cloud Load Balancer]
    GCLB -->|Ingress| GKE[â˜¸ï¸ GKE Cluster]
    
    subgraph "Google Kubernetes Engine"
        InferencePool[Nodes: e2-standard-4 (Spot)]
        
        ServiceWeb[Next.js Frontend]
        ServiceAI[Ollama (Llama 3)]
        
        ServiceWeb -->|/api/chat| ServiceAI
    end
    
    subgraph "Infrastructure"
        TF[Terraform] -->|Provisions| VPC[VPC Network]
        TF -->|Provisions| GKE
    end
```

### Key Components
1.  **Frontend**: Next.js 14 (App Router) with a sleek Dark Mode UI.
2.  **AI Backend**: Ollama running `Meta-Llama-3-8B`, optimized for CPU inference (`e2-standard-4` nodes).
3.  **Infrastructure**: Managed via Terraform + GitHub Actions.
4.  **Security**:
    -   **Cloudflare**: Logic/DNS protection (Grey Cloud "DNS Only").
    -   **GKE Ingress**: Google Managed SSL Certificates (Auto-Renewing).
    -   **VPC**: Private cluster networking.

---

## ğŸš€ Workflows (Automation)

This repository includes "Click-to-Run" GitHub Actions for managing the entire lifecycle.

### 1. ğŸŸ¢ Apply (Switch ON)
*   **Workflow**: `Infrastructure Manager` -> `Apply`.
*   **What it does**: Provisions GKE, IP, Node Pools, and deploys the apps.
*   **Time**: ~10-15 minutes.

### 2. ğŸ˜´ Hibernate (Save Money)
*   **Workflow**: `Hibernate / Wake Up` -> `Hibernate`.
*   **What it does**: Scales expensive Node Pools to **0**. Keeps the Load Balancer & IP active.
*   **Cost**: ~$2/month (vs ~$80/month active).
*   **Use Case**: Turn off at night or when not demoing.

### 3. âš¡ Wake Up (Demo Ready)
*   **Workflow**: `Hibernate / Wake Up` -> `Wake Up`.
*   **What it does**: Restores Node Pools.

### 4. ğŸ”´ Destroy (Switch OFF)
*   **Workflow**: `Infrastructure Manager` -> `Destroy`.
*   **What it does**: Deletes **EVERYTHING** (Cluster, IP, Disks).
*   **Warning**: You will get a NEW IP Address next time. You must update Cloudflare DNS manually.

---

## ğŸ› ï¸ Setup Instructions

### Prerequisites
*   Google Cloud Project (with Billing enabled).
*   GitHub Repository Secrets configured.

### Secrets (`.github/workflows`)
| Secret Name | Description |
| :--- | :--- |
| `GCP_PROJECT_ID` | Your Google Cloud Project ID (e.g., `sowrakasha-platform`) |
| `GCP_SERVICE_ACCOUNT` | Email of the Terraform Service Account |
| `GCP_WORKLOAD_IDENTITY_PROVIDER` | `projects/123.../locations/global/workloadIdentityPools/...` |

### Manual Steps (One-Time)
1.  **Domain Setup**: Buy a domain (e.g., `sowrakasha.me`).
2.  **DNS**: Point `A` record (`@`) to the Static IP generated by Terraform.
    *   *Important*: Use **DNS Only** (Grey Cloud) on Cloudflare to allow Google Certificate Manager to verify ownership.

---

## ğŸ“‚ Repository Structure

```bash
â”œâ”€â”€ .github/workflows/   # CI/CD Pipelines (Infra, App, Hibernate)
â”œâ”€â”€ charts/              # Helm Charts (Deployment Manifests)
â”œâ”€â”€ infrastructure/      # Terraform Code (GCP Resources)
â”œâ”€â”€ web-app/             # Next.js Source Code
â””â”€â”€ bootstrap.sh         # Initial Project Setup Script
```

---

*Architected by Sharath.*
